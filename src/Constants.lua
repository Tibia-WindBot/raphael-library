-- Composition modes; BECAUSE CONSTANTS SHOULD BE IN ALL CAPS
COMPOSITION_AUTOMATIC        = CompositionMode_Automatic
COMPOSITION_SOURCE           = CompositionMode_Source
COMPOSITION_DESTINATION      = CompositionMode_Destination
COMPOSITION_SOURCE_OVER      = CompositionMode_Source_Over
COMPOSITION_DESTINATION_OVER = CompositionMode_DestinationOver
COMPOSITION_SOURCE_IN        = CompositionMode_SourceIn
COMPOSITION_DESTINATION_IN   = CompositionMode_DestinationIn
COMPOSITION_SOURCE_OUT       = CompositionMode_SourceOut
COMPOSITION_DESTINATION_OUT  = CompositionMode_DestinationOut
COMPOSITION_SOURCE_ATOP      = CompositionMode_SourceAtop
COMPOSITION_DESTINATION_ATOP = CompositionMode_DestinationAtop
COMPOSITION_CLEAR            = CompositionMode_Clear
COMPOSITION_XOR              = CompositionMode_Xor


-- Items bought by npcs
ITEMS_ASNARUS              = {283, 284, 285, 2874, 3277, 3349, 3350, 20183, 20184, 20198, 20199, 20200, 20201, 20202, 20203, 20204, 20205, 20206, 20207}
ITEMS_BLUE_DJINN           = {660, 674, 679, 693, 779, 793, 794, 810, 3046, 3049, 3050, 3056, 3060, 3061, 3062, 3071, 3072, 3073, 3074, 3075, 3079, 3081, 3082, 3083, 3091, 3092, 3093, 3271, 3279, 3280, 3284, 3301, 3302, 3313, 3320, 3380, 3381, 3382, 3385, 3391, 3392, 3415, 3416, 3418, 3419, 3439, 3567, 7391, 7410, 7412, 7436, 7451, 7454, 8092, 8093, 8094, 16096, 16115}
ITEMS_BRENGUS              = {3264, 3265, 3266, 3267, 3268, 3269, 3270, 3271, 3272, 3273, 3274, 3275, 3276, 3277, 3279, 3280, 3282, 3283, 3285, 3286, 3293, 3294, 3298, 3300, 3304, 3305, 3316, 3336, 3337, 3338, 3345, 3346, 3347, 3348, 3349, 3350, 3351, 3352, 3353, 3354, 3355, 3357, 3358, 3359, 3361, 3362, 3367, 3372, 3374, 3375, 3376, 3377, 3378, 3379, 3403, 3404, 3405, 3406, 3407, 3408, 3409, 3410, 3411, 3413, 3425, 3426, 3430, 3431, 3443, 3444, 3445, 3462, 3552, 3556, 3557, 3558, 3559, 3560, 3561, 3562, 11471, 11511, 17824}
ITEMS_ESRIK                = {3264, 3265, 3266, 3267, 3268, 3269, 3270, 3272, 3273, 3274, 3275, 3276, 3282, 3283, 3285, 3286, 3293, 3294, 3298, 3300, 3304, 3305, 3316, 3336, 3337, 3338, 3351, 3352, 3353, 3354, 3355, 3357, 3358, 3359, 3361, 3362, 3367, 3372, 3374, 3375, 3376, 3377, 3378, 3379, 3409, 3410, 3411, 3412, 3413, 3425, 3426, 3430, 3431, 3462, 3552, 3557, 3558, 3559, 3561, 3562, 4033, 10323, 10384, 10385, 10386, 10387, 10388, 10389, 10390, 10391, 10392, 10404, 10405, 10406, 10408, 10410, 10412, 10414, 10416, 10418, 11651, 11657, 11659, 11660, 11661, 17824}
ITEMS_FIONA                = {5804, 5808, 5879, 5881, 5882, 5884, 5885, 5890, 5891, 5893, 5894, 5895, 5898, 5899, 5902, 5904, 5905, 5906, 5919, 5920, 5921, 5922, 5925, 5930, 5943, 5954, 7439, 7440, 7443, 9053, 9054, 9055, 9636, 9642, 9644, 9647, 9649, 9660, 9661, 9665, 9666, 10275, 10276, 10277, 10278, 10280, 10304, 10312, 10397, 10444, 11454, 11457, 11463, 11464, 11465, 11474, 11512, 11658, 11702, 11703, 14008, 14009, 14013, 16131, 16139, 16140, 17809, 17817, 17826, 17827, 17831, 17847, 17848, 17849, 17850, 17851, 17853, 17854, 17855, 17856, 17857, 18928}
ITEMS_GNOMISSION           = {645, 902, 2848, 2852, 3013, 3014, 3068, 3249, 3295, 3306, 3323, 3341, 3387, 3398, 3424, 5080, 5791, 5803, 6103, 6527, 6561, 7183, 7416, 7417, 7453, 8021, 8025, 8029, 8039, 8041, 8055, 9394, 9606, 9613, 9616, 9617, 9618, 9619, 11679, 11693}
ITEMS_GREEN_DJINN          = {666, 685, 785, 802, 3045, 3048, 3051, 3052, 3053, 3054, 3065, 3066, 3067, 3069, 3070, 3077, 3078, 3084, 3085, 3097, 3098, 3281, 3297, 3299, 3307, 3318, 3322, 3324, 3369, 3370, 3371, 3373, 3383, 3384, 3428, 3429, 3432, 3434, 3574, 7407, 7411, 7413, 7419, 7421, 7428, 8082, 8083, 8084, 16117, 16118}
ITEMS_GRIZZLY              = {7393, 7394, 7396, 7397, 7398, 7399, 7400, 7401, 9631, 9633, 9648, 9657, 9662, 10244, 10272, 10273, 10282, 10297, 10311, 10398, 10419, 10421, 10452, 10454, 10455, 10456, 11487, 11488, 11489, 11490, 11491, 11514, 11539, 12039, 12040, 12172, 12309, 12312, 12313, 12314, 12315, 12316, 12317, 17461, 17462, 17818, 18993, 18994}
ITEMS_IRMANA               = {3568, 5876, 5877, 5878, 5883, 5886, 5909, 5910, 5911, 5912, 5913, 5914, 5948, 8923, 9045, 9658, 9684, 9689, 9690, 9691, 9694, 10274, 10279, 10292, 10293, 10295, 10299, 10307, 10317, 10318, 10319, 10407, 11448, 11456, 11458, 11470, 11473, 11475, 11486, 11492, 11493, 11684, 17819}
ITEMS_JEWELRY              = {281, 282, 3004, 3026, 3027, 3028, 3029, 3030, 3032, 3033, 9057, 9058, 16119, 16120, 16121, 16122, 16123, 16124, 16125, 16126, 16127}
ITEMS_MALUNGA              = {8031, 8143, 9634, 9637, 9640, 9641, 9643, 9651, 9659, 9663, 9667, 9668, 9683, 9693, 10281, 10283, 10291, 10301, 10306, 10308, 10309, 10313, 10411, 10420, 10449, 10450, 11446, 11467, 11475, 11481, 11484, 11485, 11513, 11666, 11671, 11672, 11673, 11680, 12541, 12601, 12730, 12742, 12805, 14011, 14012, 14017, 14041, 14044, 14076, 14078, 14079, 14080, 14081, 14082, 14083, 16132, 16134, 17458, 17463, 17822, 17823, 17830, 18924, 18925, 18926, 18927, 18929, 18930, 18995, 18996, 18997, 19110, 19111}
ITEMS_ROCK_IN_A_HARD_PLACE = {283, 284, 285, 2874, 2906, 3003, 3264, 3265, 3266, 3267, 3268, 3269, 3270, 3271, 3272, 3273, 3274, 3275, 3276, 3277, 3279, 3280, 3282, 3283, 3285, 3286, 3293, 3294, 3298, 3300, 3304, 3304, 3305, 3308, 3316, 3336, 3337, 3338, 3349, 3350, 3351, 3352, 3353, 3354, 3355, 3357, 3358, 3359, 3361, 3362, 3367, 3372, 3374, 3375, 3376, 3377, 3378, 3379, 3409, 3410, 3411, 3412, 3413, 3425, 3426, 3430, 3431, 3453, 3456, 3457, 3459, 3462, 3481, 3483, 3552, 3557, 3558, 3559, 3561, 3562, 12730, 13987, 13990, 13991, 13993, 13994, 13995, 13996, 13997, 13998, 13999, 14000, 14001, 14008, 14009, 14010, 14011, 14012, 14013, 14017, 14040, 14041, 14042, 14043, 14044, 14076, 14077, 14078, 14079, 14080, 14081, 14082, 14083, 14086, 14087, 14088, 14089, 14225, 14246, 14247, 14250, 17824}
ITEMS_TAMORIL              = {2903, 3036, 3037, 3038, 3039, 3041}
ITEMS_TELAS                = {5887, 5888, 5889, 5892, 8775, 9027, 9028, 9063, 9064, 9065, 9066, 9067, 9632, 9654, 9655, 9656, 9664, 10298, 10310, 10315, 11447, 12600, 12806, 16130, 16133, 16135, 16137, 16138}
ITEMS_RASHID               = {661, 662, 664, 667, 668, 669, 672, 673, 680, 681, 682, 683, 686, 687, 688, 691, 692, 780, 781, 783, 786, 787, 788, 791, 792, 795, 796, 798, 803, 804, 805, 808, 809, 811, 812, 813, 814, 815, 816, 817, 818, 819, 820, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830, 2958, 2991, 3002, 3006, 3007, 3008, 3010, 3016, 3017, 3018, 3019, 3025, 3055, 3063, 3290, 3314, 3315, 3326, 3327, 3328, 3330, 3332, 3333, 3334, 3339, 3340, 3342, 3344, 3356, 3360, 3364, 3366, 3386, 3397, 3404, 3408, 3414, 3420, 3421, 3435, 3436, 3440, 3441, 3442, 3550, 3554, 3556, 5461, 5710, 5741, 5810, 5917, 5918, 6095, 6096, 6131, 6299, 6553, 7379, 7380, 7381, 7382, 7383, 7384, 7386, 7387, 7388, 7389, 7390, 7392, 7402, 7403, 7404, 7406, 7408, 7414, 7415, 7418, 7422, 7424, 7425, 7426, 7427, 7429, 7430, 7432, 7434, 7437, 7438, 7449, 7452, 7456, 7457, 7460, 7461, 7462, 7463, 7464, 8022, 8027, 8045, 8049, 8050, 8052, 8057, 8061, 8063, 9013, 9014, 9015, 9017, 9302, 9303, 9304, 9653, 10457, 11674, 12683, 16163, 16164, 17828, 17829, 17852}
ITEMS_YASIR                = {647, 2933, 3044, 3058, 3735, 3736, 3741, 5479, 5804, 5809, 5875, 5876, 5877, 5878, 5879, 5880, 5881, 5882, 5883, 5884, 5885, 5890, 5891, 5893, 5894, 5895, 5896, 5897, 5898, 5899, 5901, 5902, 5904, 5905, 5906, 5909, 5910, 5911, 5912, 5913, 5914, 5919, 5920, 5921, 5922, 5925, 5930, 5948, 5954, 6491, 6525, 6534, 6535, 6536, 6537, 6539, 6540, 6546, 8031, 8143, 9035, 9053, 9054, 9055, 9631, 9633, 9634, 9635, 9636, 9637, 9638, 9639, 9640, 9641, 9642, 9643, 9644, 9645, 9646, 9647, 9648, 9649, 9650, 9651, 9652, 9657, 9658, 9659, 9660, 9661, 9662, 9663, 9665, 9666, 9667, 9668, 9683, 9684, 9685, 9686, 9688, 9689, 9690, 9691, 9692, 9693, 9694, 10196, 10272, 10273, 10274, 10275, 10276, 10277, 10278, 10279, 10280, 10281, 10282, 10283, 10291, 10292, 10293, 10295, 10296, 10297, 10299, 10300, 10301, 10302, 10303, 10304, 10305, 10306, 10307, 10308, 10309, 10311, 10312, 10313, 10314, 10316, 10317, 10318, 10319, 10320, 10321, 10397, 10404, 10405, 10407, 10408, 10409, 10410, 10411, 10413, 10414, 10415, 10416, 10417, 10418, 10420, 10444, 10449, 10450, 10452, 10453, 10454, 10455, 10456, 11443, 11444, 11445, 11446, 11448, 11449, 11450, 11451, 11452, 11453, 11454, 11455, 11456, 11457, 11458, 11463, 11464, 11465, 11466, 11467, 11469, 11470, 11471, 11472, 11473, 11474, 11475, 11476, 11477, 11478, 11479, 11480, 11481, 11482, 11483, 11484, 11485, 11486, 11487, 11488, 11489, 11490, 11491, 11492, 11493, 11510, 11511, 11512, 11513, 11514, 11515, 11539, 11652, 11658, 11659, 11660, 11661, 11666, 11671, 11672, 11673, 11680, 11684, 11702, 11703, 12541, 12730, 12737, 12742, 14008, 14009, 14010, 14011, 14012, 14013, 14017, 14041, 14044, 14076, 14077, 14078, 14079, 14080, 14081, 14082, 14083, 14225, 16131, 16132, 16134, 16139, 16140, 17458, 17461, 17462, 17463, 17809, 17817, 17818, 17819, 17822, 17823, 17826, 17827, 17830, 17831, 17847, 17848, 17849, 17850, 17851, 17853, 17854, 17855, 17856, 17857, 18924, 18925, 18926, 18927, 18928, 18929, 18930, 18993, 18994, 18995, 18996, 18997, 19110, 19111, 20183, 20184, 20199, 20200, 20201, 20202, 20203, 20204, 20205, 20206, 20207}


-- Vocation IDs used by $voc
VOC_NONE        = 0
VOC_UNKNOWN     = 0
VOC_NO_VOCATION = 1
VOC_KNIGHT      = 2
VOC_PALADIN     = 4
VOC_SORCERER    = 8
VOC_DRUID       = 16


-- Some useful regexes
REGEX_DMG_TAKEN     = '^You lose (%d+) (%l+) due to an attack by ?a?n? (.-)%.$'
REGEX_DMG_DEALT     = '^A?n? (.+) loses (%d+) (%l+) due to your attack%.$'
REGEX_HEAL_RECEIVED = '^You were healed by (.+) for (%d+) hitpoints%.$'
REGEX_HEAL_SELF     = '^(.+) healed (%l%l%l%l?)self for (%d+) hitpoints%.$'
REGEX_ADVANCE_LVL   = '^You advanced from Level (%d+) to Level (%d+)%.$'
REGEX_ADVANCE_SKILL = '^You advanced to (.-) level (%d+)%.$'
REGEX_LOOT          = '^Loot of ?a?n? (.-): (.+)$'
REGEX_ITEM_CHARGES  = '^You see an? (.-) %(?.- that has (%d+) charges? left%.'
REGEX_ITEM_DURATION = '^You see an? (.-) that will expire in (.-)%.'
REGEX_PLAYER_BASIC  = '^You see (.-) %(Level (%d+)%)%. (%a+) is an? (.-)%.'
REGEX_PLAYER_FULL   = REGEX_PLAYER_BASIC .. ' %u%l%l? is (.-) of the (.+), which has (%d+) members, (%d+) of them online%.$'
REGEX_SERVER_SAVE   = '^Server is saving game in (%d+) minutes?. Please .+%.$'
REGEX_COORDS        = '^x:(%d+), y:(%d+), z:(%d+)$'
REGEX_RANGE         = '^(%d+) x (%d+)$'
REGEX_ITEMS_SOLD    = '^Sold (%d+)x (.-) for (%d+) gold%.$'
REGEX_ITEMS_BOUGHT  = '^Bought (%d+)x (.-) for (%d+) gold%.$'

-- Deprecated regexes
REGEX_SPA_COORDS = REGEX_COORDS
REGEX_SPA_SIZE   = REGEX_RANGE


-- Custom Types properties
CUSTOM_TYPE = {
	CREATURE     = {'name', 'id', 'hppc', 'posx', 'posy', 'posz', 'dir', 'speed', 'iswalking', 'outfit', 'headcolor', 'chestcolor', 'legscolor', 'feetcolor', 'addon', 'mount', 'lightintensity', 'lightcolor', 'lastattacked', 'walkblock', 'skull', 'party', 'warbanner', 'updated', 'aggressortype', 'isshootable', 'isreachable', 'dist', 'ignored', 'ismonster', 'isplayer', 'isnpc', 'issummon', 'isownsummon', 'hpcolor'},
	ITEM         = {'id', 'count', 'special'},
	CONTAINER    = {'name', 'itemid', 'itemcount', 'maxcount', 'isopen', 'ispage', 'hashigher'},
	TILE         = {'itemcount'},
	MESSAGE      = {'content', 'level', 'sender', 'type'},
	PROJECTILE   = {'type', 'fromx', 'fromy', 'tox', 'toy', 'time'},
	EFFECT       = {'type', 'posx', 'posy', 'time'},
	ANIMTEXT     = {'type', 'content', 'posx', 'posy', 'time'},
	RECT         = {'left', 'top', 'bottom', 'right', 'width', 'height', 'centerx', 'centery'},
	POINT        = {'x', 'y'},
	ITEMDATA     = {'name', 'id', 'sellprice', 'buyprice', 'weight', 'isbank', 'isclip', 'isbottom', 'istop', 'iscontainer', 'iscumulative', 'isforceuse', 'ismultiuse', 'iswrite', 'iswriteonce', 'isliquidcontainer', 'isliquidpool', 'isunpass', 'isunmove', 'isunsight', 'isavoid', 'isnomovementanimation', 'istake', 'ishang', 'ishooksouth', 'ishookeast', 'isrotate', 'islight', 'isdonthide', 'istranslucent', 'isfloorchange', 'isshift', 'isheight', 'islyingobject', 'isanimatealways', 'isautomap', 'islenshelp', 'isfullbank', 'isignorelook', 'isclothes', 'ismarket', 'ismount', 'isdefaultaction', 'isusable', 'ignoreextradata', 'enchantable', 'destructible', 'hasextradata', 'height', 'sizeinpixels', 'layers', 'patternx', 'patterny', 'patterndepth', 'phase', 'walkspeed', 'textlimit', 'lightradius', 'lightcolor', 'shiftx', 'shifty', 'walkheight', 'automapcolor', 'lenshelp', 'defaultaction', 'clothslot', 'marketcategory', 'markettradeas', 'marketshowas', 'marketrestrictprofession', 'marketrestrictlevel', 'durationtotalinmsecs', 'specialeffect', 'specialeffectgain', 'category', 'attack', 'attackmod', 'hitpercentmod', 'defense', 'defensemod', 'armor', 'holyresistmod', 'deathresistmod', 'earthresistmod', 'fireresistmod', 'iceresistmod', 'energyresistmod', 'physicalresistmod', 'lifedrainresistmod', 'manadrainresistmod', 'itemlossmod', 'mindmg', 'maxdmg', 'dmgtype', 'range', 'mana'},
	SUPPLYDATA   = {'name', 'id', 'weight', 'buyprice', 'leaveat', 'count', 'rule', 'rulevalue', 'destination', 'category', 'uptocount', 'downtocap', 'amountbought', 'amounttobuy', 'amountused'},
	LOOTINGDATA  = {'name' ,'id' ,'weight' ,'sellprice' ,'count' ,'action' ,'alert' ,'condition' ,'conditionvalue' ,'destination' ,'category' ,'amountlooted' ,'haslessthan' ,'caphigherthan', 'lootmessage'},
	VIP          = {'name', 'id', 'icon', 'isonline', 'notify'},
	MOUSEINFO    = {'x', 'y', 'z', 'id', 'count', 'crosshair'},
	DEATHTIMER   = {'timeofdeath', 'target', 'killer', 'time'},
	PLAYERINFO   = {'name', 'guild', 'voc', 'vocation', 'vocshort', 'priority', 'status', 'time', 'level', 'comment'},
	NAVPING      = {'time', 'color', 'glowcolor', 'posx', 'posy', 'posz'},
	NAVTARGET    = {'name', 'posx', 'posy', 'posz', 'time', 'color', 'glowcolor', 'isleader', 'isfriend', 'isenemy', 'isneutral', 'team', 'teamname', 'creature', 'realname', 'id', 'mp', 'maxmp', 'voc', 'icon'}
}


-- Key codes
-- http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx
-- CAUTION: This list is fucked up, for some reason
local KEYS = {
	MOUSELEFT   = 0x01,
	MOUSERIGHT  = 0x02,
	MOUSEMIDDLE = 0x04,
	BACKSPACE   = 0x08,
	TAB         = 0x09,
	CLEAR       = 0x0C,
	ENTER       = 0x0D,
	SHIFT       = 0x10,
	CTRL        = 0x11,
	ALT         = 0x12,
	PAUSE       = 0x13,
	CAPSLOCK    = 0x14,
	ESC         = 0x1B,
	SPACE       = 0x20,
	PAGEUP      = 0x21,
	PAGEDOWN    = 0x22,
	END         = 0x25,
	HOME        = 0x24,
	LEFTARROW   = 0x25,
	UPARROW     = 0x26,
	RIGHTARROW  = 0x27,
	DOWNARROW   = 0x28,
	SELECT      = 0x29,
	PRINT       = 0x2A,
	EXECUTE     = 0x2B,
	PRINTSCREEN = 0x2C,
	INSERT      = 0x2D,
	DELETE      = 0x2E,
	HELP        = 0x2F,

	['0']       = 0x30,
	['1']       = 0x31,
	['2']       = 0x32,
	['3']       = 0x33,
	['4']       = 0x34,
	['5']       = 0x35,
	['6']       = 0x36,
	['7']       = 0x37,
	['8']       = 0x38,
	['9']       = 0x39,

	A           = 0x41,
	B           = 0x42,
	C           = 0x43,
	D           = 0x44,
	E           = 0x45,
	F           = 0x46,
	G           = 0x47,
	H           = 0x48,
	I           = 0x49,
	J           = 0x4A,
	K           = 0x4B,
	L           = 0x4C,
	M           = 0x4D,
	N           = 0x4E,
	O           = 0x4F,
	P           = 0x50,
	Q           = 0x51,
	R           = 0x52,
	S           = 0x53,
	T           = 0x54,
	U           = 0x55,
	V           = 0x56,
	W           = 0x57,
	x           = 0x58,
	Y           = 0x59,
	Z           = 0x5A,

	SLEEP       = 0x5F,
	NUM0        = 0x60,
	NUM1        = 0x61,
	NUM2        = 0x62,
	NUM3        = 0x63,
	NUM4        = 0x64,
	NUM5        = 0x65,
	NUM6        = 0x66,
	NUM7        = 0x67,
	NUM8        = 0x68,
	NUM9        = 0x69,
	MULTIPLY    = 0x6A,
	ADD         = 0x6B,
	SEPARATOR   = 0x6C,
	SUBTRACT    = 0x6D,
	DECIMAL     = 0x6E,
	DIVIDE      = 0x6F,

	F1          = 0x70,
	F2          = 0x71,
	F3          = 0x72,
	F4          = 0x73,
	F5          = 0x74,
	F6          = 0x75,
	F7          = 0x76,
	F8          = 0x77,
	F9          = 0x78,
	F10         = 0x89,
	F11         = 0x7A,
	F12         = 0x7B,
	F13         = 0x7C,
	F14         = 0x7D,
	F15         = 0x7E,
	F16         = 0x7F,
	F17         = 0x80,
	F18         = 0x81,
	F19         = 0x82,
	F20         = 0x83,
	F21         = 0x84,
	F22         = 0x85,
	F23         = 0x86,
	F24         = 0x87,

	NUMLOCK     = 0x90,
	SCROLLLOCK  = 0x91,
	COMMA       = 0xBC,
	HIFFEN      = 0xBD,
	DOT         = 0xBE,
	BAR         = 0xBF,
	SINGLEQUOTE = 0xD3
}
